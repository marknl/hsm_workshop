## Salting
But also when signing/encrypting some random is sometimes needed! This
is commonly called a \'salt\' or an \'initialization vector\'.\
This random could be generated by an HSM, but is never stored in the
HSM, it is the responsibility of the signing or encrypting software.\
Why salt? The more you use a key, the more output of your key is
available to the crackers, the higher the risk becomes of them finding
the key.\
This is known as an \"offline, stored dictionary attack\", just
pre-calculate (and store and index) all possible options\...\
With different salting, even identical input and an identical key will
give you different output every time.\
So put a little random into a signature/encryption, this will make a
stored dictionary attack much more difficult, even pseudo random will
do.\
E.g. NSEC3 can be salted. But the latest RFC advices against it:\
\"In the case of DNS, the situation is different because the hashed
names placed in NSEC3 records are always implicitly \'salted\' by
hashing the FQDN from each zone.\"\
<https://datatracker.ietf.org/doc/html/rfc9276#name-salt>\
[Hands-on: Finland tastes salty]{style="color: rgb(0,128,0);"}

The KSK-ZSK \"key-subkey\" mechanism is nice, you do not have to contact
IANA every time you change a key.\
But knowing the above, a ZSK also \"protects\" the KSK against
over-use.\
You use the KSK only when signing a new DNSKEY RRset, probably \< 10
times per year.\
You use a ZSK every time a RRSIG expires, probably hundreds of thousands
of times per year (if not millions).\
ZSK rolling is important: If the baddies have your signing key, they can
create a valid signature on a malicious RR .

Also: this is the reason your SSL/TLS (e.g. https) certificate has a
certificate chain (the intermediate certificates are their ZSK).\
Paranoia bonus: you could keep your KSK, or a root-certificate
completely off-line, or even on a stick in a safe (until needed for
signing a new DNSKEY RRset)

E.g. the initialization vector[ (]{style="color: rgb(32,33,34);"}IV[) of
AES is a salt. ]{style="color: rgb(32,33,34);"} [\
]{style="color: rgb(32,33,34);"} [Hands-on: Cyberchef, your tool for all
things crypto]{style="color: rgb(0,128,0);"}

------------------------
[Next](https://github.com/niek-sidn/hsm_workshop/blob/main/Slide08.md)
